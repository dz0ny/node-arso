#!/usr/bin/env nodejs
// Generated by CoffeeScript 1.6.2
var app, cli, fs, vreme;

cli = require('commander');

fs = require('fs');

vreme = require("" + __dirname + "/../lib/arso");

app = JSON.parse(fs.readFileSync("" + __dirname + "/../package.json", 'utf-8'));

cli.version(app.version);

cli.command("vreme <kraj> [json_kljuc]").description("Vreme za izbrani <kraj>, [json_kluc] v json dokumentu").action(function(kraj, json) {
  return vreme.location_from_name(kraj, function(kraj, loc) {
    return vreme.arso(loc, function(arso) {
      if (json != null) {
        return console.log(arso.metData[json]);
      } else {
        return console.log(arso.metData);
      }
    });
  });
});

cli.command("razmere <kraj> [json_kljuc]").description("Radarske za izbrani <kraj>, [json_kluc] v json dokumentu").action(function(kraj, json) {
  return vreme.location_from_name(kraj, function(kraj, loc) {
    return vreme.opendata_radar(loc, function(opendata) {
      if (json != null) {
        return console.log(opendata[json]);
      } else {
        return console.log(opendata);
      }
    });
  });
});

cli.command("napoved <kraj> [json_kljuc]").description("Napoved za naslednjih 12 ur za izbrani <kraj>, [json_kluc] v json dokumentu").action(function(kraj, json) {
  return vreme.location_from_name(kraj, function(kraj, loc) {
    return vreme.opendata_napoved(loc, function(opendata) {
      if (json != null) {
        return console.log(opendata[json]);
      } else {
        return console.log(opendata);
      }
    });
  });
});

cli.parse(process.argv);
